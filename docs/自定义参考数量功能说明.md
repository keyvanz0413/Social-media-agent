# 自定义参考帖子数量功能说明

## 📌 功能概述

用户可以在创作小红书内容时，自由指定分析多少篇爆款帖子作为参考。

- **默认值**：5篇
- **建议范围**：3-10篇
- **特点**：更多帖子 = 更全面的分析，但耗时更长

---

## 🎯 使用方法

### 1. 交互式模式

启动程序：
```bash
python main.py
```

输入你的需求时，可以自然地表达想要参考的数量：

| 用户输入 | 识别结果 | 说明 |
|---------|---------|------|
| "发表一篇旅游帖子" | `limit=5` | 未指定，使用默认值 |
| "写一篇攻略，参考10篇爆款帖子" | `limit=10` | 明确指定10篇 |
| "创作内容，只看3篇就好" | `limit=3` | 表达"只看3篇" |
| "多分析一些，至少8篇" | `limit=8` | 表达"至少8篇" |
| "参考6个爆款" | `limit=6` | 使用"个"作单位 |

### 2. 单任务模式

```bash
python main.py --mode single --task "写一篇北海道攻略，参考10篇爆款帖子"
```

### 3. API 调用

```python
from tools.content_analyst import agent_a_analyze_xiaohongshu

# 使用默认数量（5篇）
result = agent_a_analyze_xiaohongshu("北海道旅游")

# 指定数量（10篇）
result = agent_a_analyze_xiaohongshu("北海道旅游", limit=10)

# 指定数量（3篇）
result = agent_a_analyze_xiaohongshu("北海道旅游", limit=3)
```

---

## 💡 使用建议

### 根据场景选择数量

| 场景 | 推荐数量 | 理由 |
|------|---------|------|
| **快速创作** | 3-5篇 | 速度快，获取核心特征 |
| **标准创作** | 5-7篇 | 平衡速度和质量 |
| **深度分析** | 8-10篇 | 全面了解，提取更多模式 |
| **特殊主题** | 10+篇 | 小众主题，需要更多样本 |

### 权衡考虑

**更多帖子的优势**：
- ✅ 更全面的数据洞察
- ✅ 发现更多标题模式
- ✅ 更准确的用户需求分析
- ✅ 更多的创作建议

**更多帖子的劣势**：
- ⏱️ 搜索时间更长
- ⏱️ 分析处理更慢
- 💰 消耗更多 API tokens

---

## 🔍 识别原理

AI Coordinator 会智能识别用户输入中的数量表达：

### 支持的表达方式

1. **直接数字**
   - "参考10篇帖子"
   - "分析8个爆款"
   - "看5篇就好"

2. **描述性表达**
   - "只看3篇"
   - "多看一些"（会识别上下文）
   - "至少8篇"

3. **不同单位**
   - "10篇"
   - "10个"
   - "10条"

### 识别逻辑

Coordinator Agent 会：
1. 分析用户输入的完整句子
2. 识别数量相关的关键词
3. 提取具体数字
4. 将数字传递给 `agent_a_analyze_xiaohongshu` 的 `limit` 参数

---

## 📊 实际效果

### 示例对话

**场景1：使用默认值**
```
👤 你: 发表一篇关于悉尼旅游的帖子

🤖 Coordinator: 正在分析热门内容...
[分析了5篇帖子，发现了"数字型标题"、"个人体验"等模式]
[继续创作...]
```

**场景2：指定10篇**
```
👤 你: 写一篇北海道攻略，参考10篇爆款帖子

🤖 Coordinator: 正在分析10篇热门帖子...
[分析了10篇帖子，发现了"行程规划"、"美食推荐"、"温泉体验"等模式]
[继续创作...]
```

**场景3：只看3篇**
```
👤 你: 创作美食内容，只看3篇就好

🤖 Coordinator: 正在分析3篇帖子...
[快速分析完成，开始创作...]
```

---

## ⚠️ 注意事项

1. **数量限制**
   - 系统没有硬性上限，但建议不超过15篇
   - 过多会显著增加处理时间

2. **搜索结果**
   - 实际分析数量可能少于指定数量（如果搜索结果不足）
   - 系统会在结果中显示 `total_analyzed` 字段，表示实际分析的数量

3. **费用考虑**
   - 更多帖子意味着更多的内容需要分析
   - 会消耗更多的 LLM API tokens

---

## 🎉 总结

这个功能让用户能够根据自己的需求，灵活控制内容分析的深度：

- ✅ **简单直观**：自然语言表达即可
- ✅ **智能识别**：AI 自动理解用户意图
- ✅ **灵活可控**：从快速到深度，自由选择
- ✅ **反馈清晰**：明确告知正在使用的数量

现在就试试吧！🚀

